# 代理 datanode01 的 WebHDFS
server {
    listen 9864;                      # Nginx 監聽本地 9864 端口
    server_name datanode01;           # 虛擬主機名稱 (可用於 SNI 或區分不同 datanode)

    location / {
        proxy_pass http://datanode01:9864;  # 把請求轉發到 datanode01 容器的 9864 端口
        proxy_set_header Host $host;        # 保留原始 Host 頭 (避免後端誤判)
        proxy_set_header X-Real-IP $remote_addr; # 把客戶端 IP 傳給後端 (便於日誌記錄)
    }
}

# 代理 datanode02 的 WebHDFS
server {
    listen 9864;                      # 同樣 Nginx 監聽本地 9864 端口
    server_name datanode02;           # 虛擬主機名稱 (對應 datanode02)

    location / {
        proxy_pass http://datanode02:9864;  # 請求轉發到 datanode02 容器
        proxy_set_header Host $host;        # 保留原始 Host 頭
        proxy_set_header X-Real-IP $remote_addr; # 傳遞客戶端真實 IP
    }
}
